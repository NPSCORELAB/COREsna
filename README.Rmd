---
output: 
  github_document:
    html_preview: false
---

<!-- README.Rmd generates README.md. -->

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/"
)
```


# snatools <a href="http://res.cloudinary.com/syknapptic/image/upload/v1537658876/logo_bnrvvg.png"> <img src="http://res.cloudinary.com/syknapptic/image/upload/v1537658876/logo_bnrvvg.png" align="right" height="45%" width="45%" href="http://res.cloudinary.com/syknapptic/image/upload/v1537658876/logo_bnrvvg.png"/> </a>

[![Lifecycle](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://www.tidyverse.org/lifecycle/#experimental)
[![Travis-CI Build Status](https://travis-ci.org/knapply/snatools.svg?branch=master)](https://travis-ci.org/knapply/snatools)
[![Coverage Status](https://codecov.io/gh/knapply/snatools/branch/master/graph/badge.svg)](https://codecov.io/gh/knapply/snatools?branch=master)
[![GitHub Downloads](https://img.shields.io/github/downloads/knapply/snatools/total.svg)](https://github.com/knapply/snatools)



An R toolkit to bridge graph classes and streamline network analytic workflows.

<br>

## Installation

```{r, eval=FALSE}
# Install {devtools} if you haven't already.
# install.packages("devtools")
requireNamespace(devtools)

# Install {snatools} from GitHub.
devtools::install_github("knapply/snatools")

# Load {snatools}.
library(snatools)
```

```{r, echo=FALSE}
library(snatools)
library(kableExtra)
```

<br>

```{r}
data("sampson_monastery")
```

## `bridge_net`

The `bridge_net` object provides an intermediate graph structure that can effectively map data to both `igraph` and `network` objects.

```{r}
sampson_monastery
```

## Conversion

Through `bridge_net` objects, `igraph` and `network` objects can play together easier than ever.

```{r}
ig <- as_igraph(sampson_monastery)
```

```{r, echo=FALSE}
ig
```

```{r}
nw <- as_network(sampson_monastery)
```

```{r, echo=FALSE}
nw
```

```{r}
as_network(ig)
```

```{r}
as_igraph(nw)
```

### `%==%`

Since `bridge_net`s are intermediate structures, comparing them is easy. `%==%` streamlines the process to make successful conversion confirmation as simple as possible.

```{r}
all(ig %==% nw,
    ig %==% sampson_monastery,
    nw %==% sampson_monastery)
```

The only data that are not compared by `%==%` are non-structural attributes as `igraph` and `network` do not handle them in compatible ways.

```{r}
ig %>% igraph::graph_attr_names()
nw %>% network::list.network.attributes()
```

## Standardized Data Extraction

```{r}
ig %>% vrt_to_df()
```

```{r}
nw %>% edg_to_df()
```

## Standardized Representations

```{r}
ig %>% rep_as_edgelist()
```

## Additional Tools

```{r}
nw %>% rep_as_mixing_matrix(vrt_attr = "faction")
```

## Easy Integeration with Modern Workflows

```{r, message=FALSE}
library(tidygraph, warn.conflicts = FALSE)
library(ggraph, quietly = TRUE)

nw %>% 
  as_igraph() %>% 
  as_tbl_graph() %E>%
  select(time, relation) %>% 
  filter(time == 3) %>%
  mutate(relation = factor(relation, 
                           c("liking", "praise", "esteem", "positive influence",
                             "disliking", "blame", "disesteem", "negative influence"))
        ) %>% 
  ggraph() +
  geom_edge_fan(aes(colour = relation), width = 0.5, show.legend = FALSE) +
  geom_node_point(aes(colour = faction)) +
  guides(edge_colour = guide_legend(title = NULL),
         colour = guide_legend(title = NULL)) +
  facet_edges(~ relation, ncol = 4) +
  theme_void() +
  theme(strip.text = element_text(face = "bold", vjust = 1),
        panel.border = element_rect(fill = NA, color = "lightgray"),
        legend.position = "bottom")
```


# Development Tests

```{r, message=FALSE}
devtools::test()
```

## Test Coverage

```{r}
covr::package_coverage()
```

