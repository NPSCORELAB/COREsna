<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Converting Graph Classes • snatools</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Converting Graph Classes">
<meta property="og:description" content="">
<meta property="og:image" content="https://knapply.github.io/snatools/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115043043-6"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115043043-6');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">snatools</a>
        <span class="label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased package">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/conversion.html">Converting Graph Classes</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://twitter.com/knapply_">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/knapply/snatools">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Converting Graph Classes</h1>
                        <h4 class="author">Brendan Knapp</h4>
            
            <h4 class="date">2018-08-26</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/knapply/snatools/blob/master/vignettes/conversion.Rmd"><code>vignettes/conversion.Rmd</code></a></small>
      <div class="hidden name"><code>conversion.Rmd</code></div>

    </div>

    
    
<p>The two primary graph classes in R’s network analysis ecosystem are <code>igraph</code> and <code>network</code>. While similar in many ways, the procedures provided do not always overlap. This is a challenge as the <code>igraph</code> and <code>network</code> classes are not immediately compatible, but analysts often require routines from both.</p>
<p>The common solution comes from the {<code>intergraph</code>} package, but the <code><a href="http://www.rdocumentation.org/packages/intergraph/topics/asIgraph">intergraph::asIgraph()</a></code> and <code><a href="http://www.rdocumentation.org/packages/intergraph/topics/asNetwork">intergraph::asNetwork()</a></code> methods have limitations.</p>
<p>There are two issues that {<code>snatools</code>} seeks to address with graph conversion via its <code><a href="../reference/as_igraph.html">as_igraph()</a></code> and <code><a href="../reference/as_network.html">as_network()</a></code> methods.</p>
<ol style="list-style-type: decimal">
<li>Enable safe, consistent conversion of all possible graph types, including bipartite graphs</li>
<li>Enable strict comparison of an initial graph and its state following conversion.
<ul>
<li>Manually inspecting every aspect of an object <em>does not replace built-in safety</em>.</li>
<li>Manual inspections should be possible, but be enabled by simple, built-in methods.</li>
</ul>
</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(snatools)
<span class="kw">library</span>(igraph)
<span class="kw">library</span>(network)</code></pre></div>
<div id="example-graphs" class="section level1">
<h1 class="hasAnchor">
<a href="#example-graphs" class="anchor"></a>Example Graphs</h1>
<p>For demonstration, we’ll build a pair of relatively complicated <code>igraph</code> and <code>network</code> objects. First, let’s prepare all the data that will be loaded into each graph. The following builds graph, vertex, and edge attributes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set.seed</span>(<span class="dv">369</span>)

n_vrt &lt;-<span class="st"> </span>30L
n_edg &lt;-<span class="st"> </span>1000L

graph_attrs &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">net_chr =</span> <span class="st">"Much Graph. Many Attributes"</span>,
                    <span class="dt">is_wow =</span> <span class="ot">TRUE</span>,
                    <span class="dt">net_int =</span> 1L,
                    <span class="dt">net_dbl =</span> <span class="fl">3.14</span>)

vertices_df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">name =</span> <span class="kw">paste0</span>(<span class="st">"vrt_"</span>, <span class="kw">seq_len</span>(n_vrt)),
                          <span class="dt">vrt_chr =</span> <span class="kw">sample</span>(letters, n_vrt, <span class="dt">replace =</span> <span class="ot">TRUE</span>),
                          <span class="dt">vrt_int =</span> <span class="kw">sample</span>(<span class="kw">seq.int</span>(100L), n_vrt),
                          <span class="dt">vrt_dbl =</span> <span class="kw">runif</span>(n_vrt, <span class="dv">0</span>, <span class="dv">100</span>),
                          <span class="dt">vrt_lgl =</span> <span class="kw">sample</span>(<span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>), n_vrt, <span class="dt">replace =</span> <span class="ot">TRUE</span>),
                          <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)

edges_df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">from =</span> <span class="kw">sample</span>(vertices_df<span class="op">$</span>name, n_edg, <span class="dt">replace =</span> <span class="ot">TRUE</span>),
                       <span class="dt">to =</span> <span class="kw">sample</span>(vertices_df<span class="op">$</span>name, n_edg, <span class="dt">replace =</span> <span class="ot">TRUE</span>),
                       <span class="dt">edg_chr =</span> <span class="kw">sample</span>(letters, n_edg, <span class="dt">replace =</span> <span class="ot">TRUE</span>),
                       <span class="dt">edg_int =</span> <span class="kw">sample</span>(<span class="kw">seq.int</span>(1000L), n_edg, <span class="dt">replace =</span> <span class="ot">FALSE</span>),
                       <span class="dt">edg_dbl =</span> <span class="kw">runif</span>(n_edg, <span class="dv">0</span>, <span class="dv">1000</span>),
                       <span class="dt">edg_lgl =</span> <span class="kw">sample</span>(<span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>), n_edg, <span class="dt">replace =</span> <span class="ot">TRUE</span>),
                       <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</code></pre></div>
<div id="igraph" class="section level2">
<h2 class="hasAnchor">
<a href="#igraph" class="anchor"></a><code>igraph</code>
</h2>
<p>We can then construct an <code>igraph</code> object like so.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ig_initial &lt;-<span class="st"> </span><span class="kw">graph_from_data_frame</span>(edges_df, <span class="dt">vertices =</span> vertices_df)
<span class="kw">graph_attr</span>(ig_initial) &lt;-<span class="st"> </span>graph_attrs</code></pre></div>
<p>We’ll also set a graph-level attribute noting its <code>"original class"</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">graph_attr</span>(ig_initial, <span class="st">"original class"</span>) &lt;-<span class="st"> "igraph"</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ig_initial
<span class="co">#&gt; IGRAPH c57a59b DN-- 30 1000 -- </span>
<span class="co">#&gt; + attr: net_chr (g/c), is_wow (g/l), net_int (g/n), net_dbl (g/n),</span>
<span class="co">#&gt; | original class (g/c), name (v/c), vrt_chr (v/c), vrt_int (v/n),</span>
<span class="co">#&gt; | vrt_dbl (v/n), vrt_lgl (v/l), edg_chr (e/c), edg_int (e/n),</span>
<span class="co">#&gt; | edg_dbl (e/n), edg_lgl (e/l)</span>
<span class="co">#&gt; + edges from c57a59b (vertex names):</span>
<span class="co">#&gt;  [1] vrt_2 -&gt;vrt_13 vrt_4 -&gt;vrt_4  vrt_17-&gt;vrt_11 vrt_3 -&gt;vrt_5 </span>
<span class="co">#&gt;  [5] vrt_11-&gt;vrt_18 vrt_5 -&gt;vrt_21 vrt_24-&gt;vrt_16 vrt_1 -&gt;vrt_3 </span>
<span class="co">#&gt;  [9] vrt_18-&gt;vrt_10 vrt_13-&gt;vrt_23 vrt_20-&gt;vrt_13 vrt_3 -&gt;vrt_27</span>
<span class="co">#&gt; [13] vrt_9 -&gt;vrt_6  vrt_8 -&gt;vrt_28 vrt_24-&gt;vrt_30 vrt_8 -&gt;vrt_10</span>
<span class="co">#&gt; [17] vrt_9 -&gt;vrt_1  vrt_7 -&gt;vrt_8  vrt_10-&gt;vrt_22 vrt_23-&gt;vrt_22</span>
<span class="co">#&gt; + ... omitted several edges</span></code></pre></div>
</div>
<div id="network" class="section level2">
<h2 class="hasAnchor">
<a href="#network" class="anchor"></a><code>network</code>
</h2>
<p>Let’s modify the data before constructing the <code>network</code> object.</p>
<p>The following changes the name of the vertex attribute that references vertex names from the <code>igraph</code> convention (<code>"name"</code>) to <code>network</code>’s convention (<code>"vertex.names"</code>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(vertices_df)[<span class="kw">names</span>(vertices_df) <span class="op">==</span><span class="st"> "name"</span>] &lt;-<span class="st"> "vertex.names"</span></code></pre></div>
<p>We’ll also use a <code>numeric</code> <code>matrix</code> edge list instead of the <code>"from"</code> and <code>"to"</code> columns of <code>edges_df</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">el &lt;-<span class="st"> </span><span class="kw">as_edgelist</span>(ig_initial, <span class="dt">names =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p>We can then construct the <code>network</code> object like so.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nw_initial &lt;-<span class="st"> </span><span class="kw">as.network.matrix</span>(el, <span class="dt">matrix.type =</span> <span class="st">"edgelist"</span>, 
                                <span class="dt">loops =</span> <span class="ot">TRUE</span>, <span class="dt">multiple =</span> <span class="ot">TRUE</span>, <span class="dt">edge.check =</span> <span class="ot">TRUE</span>)

<span class="cf">for</span>(g <span class="cf">in</span> <span class="kw">names</span>(graph_attrs)) {
  <span class="kw">set.network.attribute</span>(nw_initial, g, graph_attrs[[g]])
}
<span class="cf">for</span>(v <span class="cf">in</span> <span class="kw">names</span>(vertices_df)) {
  <span class="kw">set.vertex.attribute</span>(nw_initial, v, vertices_df[[v]])
}
<span class="cf">for</span>(e <span class="cf">in</span> <span class="kw">names</span>(edges_df)[<span class="op">!</span><span class="kw">names</span>(edges_df) <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">"from"</span>, <span class="st">"to"</span>)]) {
  <span class="kw">set.edge.attribute</span>(nw_initial, e, edges_df[[e]])
}</code></pre></div>
<p>As with <code>ig_initial</code>, we’ll assign a graph-level attribute noting its <code>"original class"</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set.network.attribute</span>(nw_initial, <span class="st">"original class"</span>, <span class="st">"network"</span>)

nw_initial
<span class="co">#&gt;  Network attributes:</span>
<span class="co">#&gt;   vertices = 30 </span>
<span class="co">#&gt;   directed = TRUE </span>
<span class="co">#&gt;   hyper = FALSE </span>
<span class="co">#&gt;   loops = TRUE </span>
<span class="co">#&gt;   multiple = TRUE </span>
<span class="co">#&gt;   bipartite = FALSE </span>
<span class="co">#&gt;   net_chr = Much Graph. Many Attributes </span>
<span class="co">#&gt;   is_wow = TRUE </span>
<span class="co">#&gt;   net_int = 1 </span>
<span class="co">#&gt;   net_dbl = 3.14 </span>
<span class="co">#&gt;   original class = network </span>
<span class="co">#&gt;   total edges= 1000 </span>
<span class="co">#&gt;     missing edges= 0 </span>
<span class="co">#&gt;     non-missing edges= 1000 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Vertex attribute names: </span>
<span class="co">#&gt;     vertex.names vrt_chr vrt_dbl vrt_int vrt_lgl </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Edge attribute names: </span>
<span class="co">#&gt;     edg_chr edg_dbl edg_int edg_lgl</span></code></pre></div>
<p>The resulting objects are relatively complex and contain attributes from a variety of data types at all levels.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">list</span>(<span class="dt">n =</span> <span class="kw">c</span>(<span class="st">`</span><span class="dt"># Vertices</span><span class="st">`</span> =<span class="st"> </span><span class="kw">vcount</span>(ig_initial), <span class="st">`</span><span class="dt"># Edges</span><span class="st">`</span> =<span class="st"> </span><span class="kw">ecount</span>(ig_initial)),
     <span class="dt">Edges =</span> <span class="kw">c</span>(<span class="st">`</span><span class="dt">Is Multiplex?</span><span class="st">`</span> =<span class="st"> </span><span class="kw">any</span>(<span class="kw">is.multiple</span>(ig_initial)),
               <span class="st">`</span><span class="dt">Has Loops?</span><span class="st">`</span> =<span class="st"> </span><span class="kw">any</span>(<span class="kw">is.loop</span>(ig_initial))),
     <span class="st">`</span><span class="dt">Graph Attributes</span><span class="st">`</span> =<span class="st"> </span><span class="kw">vapply</span>(<span class="kw"><a href="../reference/extract-network-attributes.html">net_get_attrs</a></span>(ig_initial), typeof, <span class="kw">character</span>(<span class="dv">1</span>)),
     <span class="st">`</span><span class="dt">Vertex Attributes</span><span class="st">`</span> =<span class="st"> </span><span class="kw">vapply</span>(<span class="kw"><a href="../reference/extract-vertex-attributes.html">vrt_get_attrs</a></span>(ig_initial), typeof, <span class="kw">character</span>(<span class="dv">1</span>)),
     <span class="st">`</span><span class="dt">Edge Attributes</span><span class="st">`</span> =<span class="st"> </span><span class="kw">vapply</span>(<span class="kw"><a href="../reference/extract-edge-attributes.html">edg_get_attrs</a></span>(ig_initial), typeof, <span class="kw">character</span>(<span class="dv">1</span>)))
<span class="co">#&gt; $n</span>
<span class="co">#&gt; # Vertices    # Edges </span>
<span class="co">#&gt;         30       1000 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Edges</span>
<span class="co">#&gt; Is Multiplex?    Has Loops? </span>
<span class="co">#&gt;          TRUE          TRUE </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`Graph Attributes`</span>
<span class="co">#&gt;        net_chr         is_wow        net_int        net_dbl original class </span>
<span class="co">#&gt;    "character"      "logical"      "integer"       "double"    "character" </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`Vertex Attributes`</span>
<span class="co">#&gt;        name     vrt_chr     vrt_int     vrt_dbl     vrt_lgl </span>
<span class="co">#&gt; "character" "character"   "integer"    "double"   "logical" </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`Edge Attributes`</span>
<span class="co">#&gt;     edg_chr     edg_int     edg_dbl     edg_lgl </span>
<span class="co">#&gt; "character"   "integer"    "double"   "logical"</span>

<span class="kw">list</span>(<span class="dt">n =</span> <span class="kw">c</span>(<span class="st">`</span><span class="dt"># Vertices</span><span class="st">`</span> =<span class="st"> </span><span class="kw">network.size</span>(nw_initial),
           <span class="st">`</span><span class="dt"># Edges</span><span class="st">`</span> =<span class="st"> </span><span class="kw">network.edgecount</span>(nw_initial)),
     <span class="dt">Edges =</span> <span class="kw">c</span>(<span class="st">`</span><span class="dt">Is Multiplex?</span><span class="st">`</span> =<span class="st"> </span><span class="kw">is.multiplex</span>(nw_initial),
               <span class="st">`</span><span class="dt">Has Loops?</span><span class="st">`</span> =<span class="st"> </span><span class="kw">has.loops</span>(nw_initial)),
     <span class="st">`</span><span class="dt">Graph Attributes</span><span class="st">`</span> =<span class="st"> </span><span class="kw">vapply</span>(<span class="kw"><a href="../reference/extract-network-attributes.html">net_get_attrs</a></span>(nw_initial), typeof, <span class="kw">character</span>(<span class="dv">1</span>)),
     <span class="st">`</span><span class="dt">Vertex Attributes</span><span class="st">`</span> =<span class="st"> </span><span class="kw">vapply</span>(<span class="kw"><a href="../reference/extract-vertex-attributes.html">vrt_get_attrs</a></span>(nw_initial), typeof, <span class="kw">character</span>(<span class="dv">1</span>)),
     <span class="st">`</span><span class="dt">Edge Attributes</span><span class="st">`</span> =<span class="st"> </span><span class="kw">vapply</span>(<span class="kw"><a href="../reference/extract-edge-attributes.html">edg_get_attrs</a></span>(nw_initial), typeof, <span class="kw">character</span>(<span class="dv">1</span>)))
<span class="co">#&gt; $n</span>
<span class="co">#&gt; # Vertices    # Edges </span>
<span class="co">#&gt;         30       1000 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Edges</span>
<span class="co">#&gt; Is Multiplex?    Has Loops? </span>
<span class="co">#&gt;          TRUE          TRUE </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`Graph Attributes`</span>
<span class="co">#&gt;          loops        net_chr         is_wow        net_int        net_dbl </span>
<span class="co">#&gt;      "logical"    "character"      "logical"      "integer"       "double" </span>
<span class="co">#&gt; original class </span>
<span class="co">#&gt;    "character" </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`Vertex Attributes`</span>
<span class="co">#&gt; vertex.names      vrt_chr      vrt_int      vrt_dbl      vrt_lgl </span>
<span class="co">#&gt;  "character"  "character"    "integer"     "double"    "logical" </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`Edge Attributes`</span>
<span class="co">#&gt;     edg_chr     edg_int     edg_dbl     edg_lgl </span>
<span class="co">#&gt; "character"   "integer"    "double"   "logical"</span></code></pre></div>
<!-- # Graph Cleaning -->
<!-- In order to confirm that an `igraph` or `network` object can make a round-trip conversion with its internal data remaining intact, we want to standardize its contents. This is the purpose of `clean_graph()`, which is equipped with `clean_graph.igraph()` and `clean_graph.network()` methods. -->
<!-- Here, we clean `ig_initial` to create `ig_clean`. -->
<!-- ```{r} -->
<!-- ig_clean <- clean_graph(ig_initial) -->
<!-- ig_clean -->
<!-- ``` -->
<!-- Similarly, we clean `nw_initial` to create `nw_clean`. -->
<!-- ```{r} -->
<!-- nw_clean <- clean_graph(nw_initial) -->
<!-- nw_clean -->
<!-- ``` -->
<!-- If you don't notice any changes, don't worry. `clean_graph()` is simply ensuring that metadata not strictly required by `igraph` or `network` is present and that attribute names are sorted alphabetically. The changes will usually be subtle if they occur at all. -->
<!-- # Conversion -->
<!-- ## `igraph` to `network` -->
<!-- Once clean, we can safely convert `ig_clean` to a `network` object using `as_network()`. -->
<!-- ```{r} -->
<!-- as_network(ig_clean)  -->
<!-- ``` -->
<!-- ## `network` to `igraph` -->
<!-- Going the other direction, we can convert `nw_clean` to an `igraph` object using `as_igraph()`. -->
<!-- ```{r} -->
<!-- as_igraph(nw_clean) -->
<!-- ``` -->
<!-- ## Testing Conversion -->
<!-- If you're concerned that `as_igraph()` or `as_network()` will mangle your graph's contents, you can test its original state against the result of a round-trip conversion using `identical()`. `identical()` is the __strictest way to compare objects in R__ and only returns `TRUE` if two objects are _exactly_ equal. -->
<!-- Note that there's a _small_ catch with `igraph` objects. By itself, `identical()` will never return `TRUE`. -->
<!-- ```{r} -->
<!-- identical(ig_clean, as_igraph(as_network(ig_clean))) -->
<!-- ``` -->
<!-- This is because `igraph` objects store a pointer that _should not_ be duplicated. We can inspect it like so. -->
<!-- ```{r} -->
<!-- unclass(ig_clean)[[10]] -->
<!-- unclass(as_igraph(as_network(ig_clean)))[[10]] -->
<!-- ``` -->
<!-- In order to test that two `igraph` objects are identical, we need to omit that pointer from the object. -->
<!-- ```{r} -->
<!-- identical(unclass(ig_clean)[1:9], unclass(as_igraph(as_network(ig_clean)))[1:9]) -->
<!-- ``` -->
<!-- To simplify things, {`snatools`} includes the `%==%` infix operator to test that objects are `identical()`. -->
<!-- ```{r} -->
<!-- ig_clean %==% as_igraph(as_network(ig_clean)) -->
<!-- ``` -->
<!-- Underneath the hood, `%==%` uses `identical()` and can test the stict equality of any objects. -->
<!-- ```{r} -->
<!-- snatools:::`%==%.default` -->
<!-- ``` -->
<!-- The exception is for `igraph` objects, for which it is equipped to automatically exclude the pointer that we don't need. -->
<!-- ```{r} -->
<!-- snatools:::`%==%.igraph` -->
<!-- ``` -->
<!-- For `network` objects, you can still use `identical()` if desired. -->
<!-- ```{r} -->
<!-- identical(nw_clean, as_network(as_igraph(nw_clean))) -->
<!-- nw_clean %==% as_network(as_igraph(nw_clean)) -->
<!-- ``` -->
<!-- Now you can be __absolutely certain__ that something did not go wrong when converting between graph classes. -->
<!-- # Bipartite Graphs -->
<!-- ## Example Data -->
<!-- `as_igraph()` and `as_network()` also handle bipartite graphs. The process is _slightly_ more complicated due to the different ways that `igraph` and `network` handle such graphs. -->
<!-- To demonstrate, we'll construct the Southern Women network from scratch using its affiliation matrix. -->
<!-- ```{r} -->
<!-- sw_matrix <- matrix( -->
<!--   c(1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, -->
<!--     1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1,  -->
<!--     1, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,  -->
<!--     0, 0, 0, 0, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, -->
<!--     1, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, -->
<!--     1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 0, -->
<!--     0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 0, 0, 0, 0, -->
<!--     0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, -->
<!--     0, 0, 0, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,  -->
<!--     1, 1, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 1, -->
<!--     1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 0,  -->
<!--     0, 0, 0, 0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, -->
<!--     0, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0,  -->
<!--     1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0), -->
<!--   nrow = 14L, ncol = 18L, -->
<!--   dimnames = list( -->
<!--     c("E1", "E2", "E3", "E4", "E5", "E6", "E7", -->
<!--       "E8", "E9", "E10", "E11", "E12", "E13", "E14"), -->
<!--     c("EVELYN", "LAURA", "THERESA", "BRENDA", "CHARLOTTE", "FRANCES", -->
<!--       "ELEANOR", "PEARL", "RUTH", "VERNE", "MYRNA", "KATHERINE",  -->
<!--       "SYLVIA", "NORA", "HELEN", "DOROTHY", "OLIVIA", "FLORA"))) -->
<!-- sw_matrix -->
<!-- ``` -->
<!-- Notice that the "Southern Women" are represented by columns while the events are represented by the rows. -->
<!-- ## Bipartite Graphs in `igraph` -->
<!-- To convert `sw_matrix` to an `igraph` object, we use `graph_from_incidence_matrix()`. We'll also immediately call `clean_graph()`. -->
<!-- ```{r} -->
<!-- southern_women_ig <- sw_matrix %>%  -->
<!--   graph_from_incidence_matrix() %>%  -->
<!--   clean_graph() -->
<!-- southern_women_ig -->
<!-- ``` -->
<!-- `igraph` tracks the two modes via the vertex attribute `"type"`. Here is one of the methods to obtain vertex attributes. -->
<!-- ```{r} -->
<!-- all_vrt_attrs <- as_data_frame(southern_women_ig, "vertices") -->
<!-- ``` -->
<!-- Notice that the "Southern Women" were assigned `TRUE` for their `"type"`. -->
<!-- ```{r} -->
<!-- all_vrt_attrs[all_vrt_attrs$type, ] -->
<!-- ``` -->
<!-- The events were assigned `FALSE`. -->
<!-- ```{r} -->
<!-- all_vrt_attrs[!all_vrt_attrs$type, ] -->
<!-- ``` -->
<!-- This is because of the shape of `sw_matrix`. The `"type"` of vertices coming from columns is assigned `TRUE` while the `"type"` of vertices coming from rows is assigned `FALSE`. -->
<!-- ## Bipartite Graphs in `network` -->
<!-- `network` takes a different approach to handling bipartite graphs by tracking an "actors" mode. -->
<!-- Recall that `nw_clean` is not a bipartite network. -->
<!-- ```{r} -->
<!-- nw_clean -->
<!-- ``` -->
<!-- We an see that it explicilty states that `bipartite = FALSE`. -->
<!-- If a `network` object is bipartite, it's no longer `FALSE`. -->
<!-- ```{r} -->
<!-- southern_women_nw <- as.network.matrix(t(sw_matrix), bipartite = TRUE) %>%  -->
<!--   clean_graph() -->
<!-- southern_women_nw -->
<!-- ``` -->
<!-- It's also not `TRUE`. -->
<!-- `bipartite = 18` refers to the number of vertices belonging to the "actors" mode of the network. In this network, the other vertices are the events. -->
<!-- ## Ambiguity -->
<!-- This difference in bipartite graph handling leaves room for ambiguity when converting from `igraph` to `network`. `as_network()` handles this through its `actor_type` parameter. -->
<!-- `actor_type` refers to the vertices' `"type"` attribute. We can simply provide `TRUE` or `FALSE` to tell `as_network()` which vertices are meant to be actors in the returned `network` object. -->
<!-- For convenience, `actor_type` defaults to `TRUE`. With that in mind, we can think of `"type"` as noting whether a vertex is an "actor" or not, but we need to be careful about creating our objects to reflect this. -->
<!-- ## Putting It All Together -->
<!-- Since our vertices already have the "actor" `"type"` set to `TRUE`, we can convert `southern_women_ig` to a `network` object exactly as we did for `ig_clean`. -->
<!-- ```{r} -->
<!-- as_network(southern_women_ig) -->
<!-- ``` -->
<!-- What does it looks like when our matrix isn't as conveniently designed? -->
<!-- Here's the same network created using `sw_matrix`'s transpose. -->
<!-- ```{r} -->
<!-- swapped_types_ig <- sw_matrix %>% -->
<!--   t() %>%  -->
<!--   graph_from_incidence_matrix() %>%  -->
<!--   clean_graph() -->
<!-- swapped_types_ig -->
<!-- ``` -->
<!-- We can see that the events `"type"` is now `TRUE`, while the `"type"` of the "Southern Women" is `FALSE`. -->
<!-- ```{r} -->
<!-- swapped_vrt_attrs <- as_data_frame(swapped_types_ig, "vertices") -->
<!-- swapped_vrt_attrs[swapped_vrt_attrs$type, ] -->
<!-- ``` -->
<!-- If we don't clarify the ambiguity of `"type"`, the wrong vertices are considered to be the "actors". -->
<!-- ```{r} -->
<!-- as_network(swapped_types_ig) -->
<!-- ``` -->
<!-- By providing `FALSE` as the argument to `actor_type`, we can avoid surprises upon conversion. -->
<!-- ```{r} -->
<!-- as_network(swapped_types_ig, actor_type = FALSE) -->
<!-- ``` -->
<!-- Finally, we can confirm that they all convert properly using `%==%`. -->
<!-- ```{r} -->
<!-- southern_women_ig %==% as_igraph(as_network(southern_women_ig)) -->
<!-- southern_women_nw %==% as_network(as_igraph(southern_women_nw)) -->
<!-- ``` -->
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#example-graphs">Example Graphs</a><ul class="nav nav-pills nav-stacked">
<li><a href="#igraph"><code>igraph</code></a></li>
      <li><a href="#network"><code>network</code></a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://syknapptic.netlify.com/">Brendan Knapp</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
